<html><head><title>File obj_parser.c
</title></head><body bgcolor="#ffffff" TEXT="#000030" LINK="#4a529c" VLINK="#b57339">[ <a href="index.html">Package Index</a></code> | <a href="index_std.html">Mudlib Index</a></code> | <a href="index_eff.html">Effect Index</a></code> ]<br><h2>File /secure/simul_efun/obj_parser.c</h2>
This is the object matching code.
It is based on some code by Scatter at Dawn Whispers, although this is
both cut down and extended from what scatter had written.<hr><h2>Inherits</h2>
This class inherits the following classes <a href="secure.simul_efun.multiple_short.c.html">/secure/simul_efun/multiple_short.c</a><hr><h2>Includes</h2>
This class includes the following files <a href="include.obj_parser.h.html">/include/obj_parser.h</a> and <a href="include.playtesters.h.html">/include/playtesters.h</a><hr><h2>Method index</h2>
<dl><dt><img src="images/cyan-ball-small.gif" height=6 width=6 alt=" o ">
<a href="#match_object_in_array"><b>match_object_in_array</b></a>(string, object *, int, object)<dd>
Find an object in the given array that matches the given words.
<dt><img src="images/cyan-ball-small.gif" height=6 width=6 alt=" o ">
<a href="#match_objects_failed_mess"><b>match_objects_failed_mess</b></a>(class obj_match)<dd>
This method returns the failed message for the specified
failed match string.
<dt><img src="images/cyan-ball-small.gif" height=6 width=6 alt=" o ">
<a href="#match_objects_for_existence"><b>match_objects_for_existence</b></a>(string, object *, object)<dd>
This method checks for existance of the specified objects.
<dt><img src="images/cyan-ball-small.gif" height=6 width=6 alt=" o ">
<a href="#match_objects_in_environments"><b>match_objects_in_environments</b></a>(string, mixed, int, object)<dd>
Find an object in the given environments that match the given words.
</dl><hr><h2>Public Functions</h2>
These are functions that everyone can access.<p><dl>
.<dt><a name="match_object_in_array">
<img src="images/cyan-ball.gif" width=12 height=12 alt=" * "><b>match_object_in_array</b></a><pre>
class obj_match match_object_in_array(string input,
object * ob_list,
int type,
object player)
</pre><dd>
Find an object in the given array that matches the given words.
This will only return a correct match if the entire string
matches.  If it gets a partial match then nothing will be
returned.  The return array is of the format:<br>
<pre>({ flag, class obj_match info })
</pre>
The flag can be one of:
<dd>
<dt>OBJ_PARSER_SUCCESS
<dd>Successfuly matched the objects.  the objects part of the class will
contain the matched objects.
<dt>OBJ_PARSER_NO_MATCH
<dd>No successful match.  The text bit of the omatch class will contain
the text that didn't match
<dt>OBJ_PARSER_AMBIGUOUS
<dd>An ambigous match is returned, this means 'frog' was referenced
when there was more than one frog.  The objects part of the class
has all the objects there were matched
<dt>OBJ_PARSER_BAD_FRACTION
<dd>The specified fracition was bad, the text bit of the class contains
the bad fraction.
<dt>OBJ_PARSER_FRACTION
<dd>Means that a fraction was attempted to be applied to multiple
objects.
<dt>OBJ_PARSER_TOO_DARK
<dd>Unable to match the specified object because it is too dark.
</dl><p>
<dd><dl>
<dt><b>Parameters:</b>
<dd>input - the input string to match
<dd>ob_list - the object to list to match in
<dd>type - we restrict the matching to certain groups of objects
<dd>player - the person doing the lookup
<dt><b>Returns:</b>
<dd>an array of the format ({ flag, class obj_match info })

</dl>

<dt><a name="match_objects_failed_mess">
<img src="images/cyan-ball.gif" width=12 height=12 alt=" * "><b>match_objects_failed_mess</b></a><pre>
string match_objects_failed_mess(class obj_match failed_match)
</pre><dd>
This method returns the failed message for the specified
failed match string.<p>
<dd><dl>
<dt><b>Parameters:</b>
<dd>failed_match - the return result from match_objects_*
<dt><b>Returns:</b>
<dd>the message to print when it gets an error

</dl>

<dt><a name="match_objects_for_existence">
<img src="images/cyan-ball.gif" width=12 height=12 alt=" * "><b>match_objects_for_existence</b></a><pre>
object * match_objects_for_existence(string input,
object * env_list,
object player)
</pre><dd>
This method checks for existance of the specified objects.  It will
return any ambiguous matches as well as real matches.  This should only
be used in cases in the code where it is not nessessary to distinguish
between different objects of the same type.<p>
<dd><dl>
<dt><b>Parameters:</b>
<dd>input - the input string to check
<dd>env_list - the environments to check in
<dd>player - the player to check with
<dt><b>Returns:</b>
<dd>the array of objects

</dl>

<dt><a name="match_objects_in_environments">
<img src="images/cyan-ball.gif" width=12 height=12 alt=" * "><b>match_objects_in_environments</b></a><pre>
class obj_match match_objects_in_environments(string input,
mixed env_list,
int type,
object player)
</pre><dd>
Find an object in the given environments that match the given words.
This will only return a correct match if the entire string
matches.  If it gets a partial match then nothing will be
returned.  The return array is of the format:<br>
<pre>({ flag, class obj_match info })
</pre>
The flag can be one of:
<dd>
<dt>OBJ_PARSER_SUCCESS
<dd>Successfuly matched the objects.  the objects part of the class will
contain the matched objects.
<dt>OBJ_PARSER_NO_MATCH
<dd>No successful match.  The text bit of the omatch class will contain
the text that didn't match
<dt>OBJ_PARSER_AMBIGUOUS
<dd>An ambigous match is returned, this means 'frog' was referenced
when there was more than one frog.  The objects part of the class
has all the objects there were matched
<dt>OBJ_PARSER_BAD_FRACTION
<dd>The specified fracition was bad, the text bit of the class contains
the bad fraction.
<dt>OBJ_PARSER_FRACTION
<dd>Means that a fraction was attempted to be applied to multiple
objects.
<dt>OBJ_PARSER_TOO_DARK
<dd>Unable to match the specified object because it is too dark.
</dl><p>
<dd><dl>
<dt><b>Parameters:</b>
<dd>input - the input string to match
<dd>env_list - the environments to get the objects from
<dd>singular - force a singular match
<dd>player - the person doing the lookup
<dt><b>Returns:</b>
<dd>an array of the format ({ flag, class obj_match info })

</dl>

</dl>
<hr>
<center><font size="-1"><a href="http://discworld.imaginary.com/login.html">Discworld MUD</a>'s distribution world wide web pages.<br>brought to you by<br><strong>Cut Me Own Throat Dibbler's <a href="http://discworld.imaginary.com/sausages.html">Sensational Sausages</a>;&nbsp;buy one while they are hot.</strong><br>File last modified: Thu, 29 Mar 2018 14:29:16 GMT<br>
<hr>Lost?  Try Discworld's <a href="http://discworld.imaginary.com/">home page</a>.</center></body></html>